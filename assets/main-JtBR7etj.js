import{a as O,A as q,i as M}from"./vendor-4jich7g5.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=t(i);fetch(i.href,n)}})();const p=O.create({baseURL:"https://your-energy.b.goit.study/api"}),J=async a=>(await p.get("/exercises",{params:a})).data,X=async a=>(await p.get(`/exercises/${a}`)).data,$=async(a,e)=>(await p.patch(`/exercises/${a}/rating`,e)).data,P="dots",y="prev",b="next",v="first",S="last",u=3,l="/project-impulse/assets/sprite-Bf1cmz4A.svg";class B{constructor(e,t){this.container=e,this.pagination=t,this.initListeners()}render(){this.container.innerHTML="";const e=this.pagination.getPages(),t=this.pagination.getCurrentPage(),s=this.pagination.getTotalPages(),i=t===1,n=t===s;let r="";e.length>u&&(r+=this.createPageTemplate(v,i),r+=this.createPageTemplate(y,i)),e.forEach(o=>{typeof o=="number"?r+=this.createPageTemplate(o,!1,o===t):r+=this.createPageTemplate(o,!0)}),e.length>u&&(r+=this.createPageTemplate(b,n),r+=this.createPageTemplate(S,n)),this.container.innerHTML=`<ul class="pagination">${r}</ul>`}clear(){this.container.innerHTML=""}initListeners(){this.container.addEventListener("click",e=>{const s=e.target.closest(".page-btn");s&&(s.dataset.page===y?this.pagination.prevPage():s.dataset.page===b?this.pagination.nextPage():s.dataset.page===v?this.pagination.firstPage():s.dataset.page===S?this.pagination.lastPage():this.pagination.setPage(+s.dataset.page))})}createPageTemplate(e,t=!1,s=!1){const i=[];return s&&i.push("page-btn--active"),typeof e=="string"&&i.push(`page-btn--${e}`),`<li class="pagination__item">
      <button class="page-btn ${i.join(" ")}" ${t?'disabled="disabled"':""} data-page="${e}">${this.createPageContent(e)}</button>
    </li>`}createPageContent(e){if(typeof e=="number")return e.toString();if(e===P)return"...";const t={[v]:"icon-arw-2-left",[S]:"icon-arw-2-right",[y]:"icon-arw-left",[b]:"icon-arw-right"}[e];return`<svg class="page-icon"><use href="${l}#${t}"></use></svg>`}}class Z{constructor(e,t,s,i=1){this.totalPages=t,this.itemsPerPage=s,this.currentPage=i,this.listeners=[],this.view=new B(e,this),this.view.render()}setPage(e){e<1||e>this.totalPages||e===this.currentPage||(this.currentPage=e,this.notifyListeners())}setTotalPages(e){this.totalPages=e,this.view.render()}nextPage(){this.setPage(this.currentPage+1)}prevPage(){this.setPage(this.currentPage-1)}lastPage(){this.setPage(this.totalPages)}firstPage(){this.setPage(1)}getPages(){if(this.totalPages<=1)return[];const e=[];if(this.totalPages<=u)for(let t=1;t<=this.totalPages;t++)e.push(t);else{this.currentPage>u-1&&e.push(P);const t=Math.max(1,Math.min(this.currentPage-1,this.totalPages-u+1)),s=Math.min(this.totalPages,Math.max(this.currentPage+1,u));for(let i=t;i<=s;i++)e.push(i);this.currentPage<this.totalPages-1&&e.push(P)}return e}getCurrentPage(){return this.currentPage}getTotalPages(){return this.totalPages}clear(){this.view.clear()}onPageChange(e){this.listeners.push(e)}notifyListeners(){this.listeners.forEach(e=>e(this.currentPage,this.itemsPerPage)),this.view.render()}}class ee{constructor(e,t=!1,s){this.containerElement=e,this.withDelete=t,this.emptyStateMessage=s,this.emptyStateElement=null,this.createItemTemplate=i=>{const n=i.name?i.name.charAt(0).toUpperCase()+i.name.slice(1):"";return`
      <li class="exercise-card" role="button" tabindex="0">
        <div class="exercise-card__heading">
          <p class="exercise-badge">WORKOUT</p>

          ${this.withDelete?`
            <button class="btn-icon" type="button" data-delete-id="${i._id}">
              <svg class="icon stroke-icon" width="16" height="16">
                <use href="${l}#icon-trash"></use>
              </svg>
            </button>`:`
            <span class="rating-wrapper">
              <p class="exercise-rating">${i.rating.toFixed(1)}</p>
              <svg class="icon fill-icon exercise-rating-icon" width="14" height="14">
                <use href="${l}#icon-star"></use>
              </svg>
            </span>`}
          <button class="exercise-card__btn" type="button" data-start-id="${i._id}">
            Start
            <svg class="icon fill-icon arrow-icon" width="16" height="16">
              <use href="${l}#icon-arw-scroll"></use>
            </svg>
          </button>
        </div>
        <div class="exercise-card__main">
          <div class="icon-runningman-bg">
            <svg class="icon fill-icon icon-runningman" width="16" height="16">
              <use href="${l}#icon-runningman"></use>
            </svg>
          </div>
          <h3 class="exercise-card__title">${n}</h3>
        </div>

        <ul class="exercise-card__info">
          <li class="exercise-card__info-item">
            <span class="exercise-card__item-label">Burned calories: </span>
            <span class="exercise-card__item-content ellipsis">${i.burnedCalories} / ${i.time} minutes</span>
          </li>
          <li class="exercise-card__info-item">
            <span class="exercise-card__item-label">Body part: </span>
            <span class="exercise-card__item-content">${i.bodyPart}</span>
          </li>
          <li class="exercise-card__info-item">
            <span class="exercise-card__item-label">Target: </span>
            <span class="exercise-card__item-content">${i.target}</span>
          </li>
        </ul>
      </li>
    `},this.init()}clear(){this.containerElement.innerHTML=""}onExerciseSelect(e){this.onExerciseSelectCallback=e}onExerciseDelete(e){this.onExerciseDeleteCallback=e}render(e){e.length?this.removeEmptyState():this.renderEmptyState(),this.containerElement.innerHTML=e.filter(t=>t.name).map(this.createItemTemplate).join("")}renderEmptyState(){this.emptyStateElement||(this.emptyStateElement=document.createElement("p"),this.emptyStateElement.className="exercises-empty-message",this.emptyStateElement.innerHTML=this.emptyStateMessage,this.containerElement.parentElement.insertBefore(this.emptyStateElement,this.containerElement.parentElement.firstChild))}removeEmptyState(){this.emptyStateElement&&this.emptyStateElement.remove()}init(){this.initListeners()}initListeners(){this.containerElement.addEventListener("click",e=>{const t=e.target,s=t.closest("[data-start-id]"),i=t.closest("[data-delete-id]");if(s){const n=s.getAttribute("data-start-id");this.onExerciseSelectCallback&&n&&this.onExerciseSelectCallback(n)}if(i){const n=i.getAttribute("data-delete-id");this.onExerciseDeleteCallback&&n&&this.onExerciseDeleteCallback(n)}})}}function R(){const a=window.innerWidth-document.documentElement.clientWidth;document.documentElement.style.setProperty("--scroll-padding-right",`${a}px`)}setTimeout(R,1e3);class k{constructor(e){this.close=()=>{this.dialog.close(),document.removeEventListener("keydown",this.handleKeyDown)},this.handleKeyDown=t=>{t.key==="Escape"&&this.close()},this.dialogContentTemplate=document.querySelector(e),this.init()}onDialogClose(e){this.onCloseCallback=e}showDialog(){document.body.appendChild(this.dialog),this.dialog.classList.remove("hidden"),this.dialog.setAttribute("aria-hidden","false"),this.dialog.showModal(),document.documentElement.classList.add("modal-opened"),document.addEventListener("keydown",this.handleKeyDown)}init(){this.dialog=document.createElement("dialog"),this.dialog.classList.add("modal"),this.dialog.classList.add("hidden"),this.dialog.setAttribute("aria-modal","true"),this.dialog.setAttribute("aria-hidden","true"),this.dialog.innerHTML=this.renderDialog(),this.dialogCloseButton=this.dialog.querySelector("[data-dialog-close]"),this.dialogContent=this.dialog.querySelector("[data-dialog-content]"),this.dialogCloseButton.addEventListener("click",this.close),this.dialog.addEventListener("mousedown",e=>{e.target===e.currentTarget&&this.close()}),this.dialog.addEventListener("close",()=>{var e;(e=this.onCloseCallback)==null||e.call(this),document.documentElement.classList.remove("modal-opened"),setTimeout(()=>{this.dialog.remove()},300)})}renderDialog(){return`
      <div class="modal-container bg-inverse">
        <button class="modal-close-button" type="button" data-dialog-close>
          <svg width="24" height="24" class="icon stroke-icon">
            <use href="${l}#icon-x" data-favorite-icon  />
          </svg>
        </button>
        <div class="modal-card" data-dialog-content>
          ${this.dialogContentTemplate.innerHTML}
        </div>
      </div>
    `}}const m=class m{constructor(){this.favorites=[],this.getFromStorage()}gerFavorites(){return this.favorites}addFavorite(e){this.favorites.push(e),this.setToStorage()}removeFavorite(e){this.favorites=this.favorites.filter(t=>t!==e),this.setToStorage()}isFavorite(e){return this.favorites.includes(e)}setToStorage(){localStorage.setItem(m.LOCAL_STORAGE_KEY,JSON.stringify(this.favorites))}getFromStorage(){const e=localStorage.getItem(m.LOCAL_STORAGE_KEY);e&&(this.favorites=JSON.parse(e))}};m.LOCAL_STORAGE_KEY="yourEnergy.favorites";let T=m;const L=new T;class te extends k{constructor(){super(...arguments),this.exercise=null}show(e){this.exercise=e,this.render(),this.showDialog()}onFavoriteToggle(e){this.onFavoriteToggleCallback=e}onRatingOpen(e){this.onRatingOpenCallback=e}render(){var C,A;const e=this.dialogContentTemplate.cloneNode(!0),t={name:e.content.querySelector("[data-name-element]"),gifUrl:e.content.querySelector("[data-gif-element]"),rating:e.content.querySelector("[data-rating-element]"),target:e.content.querySelector("[data-target-element]"),bodyPart:e.content.querySelector("[data-bodyPart-element]"),equipment:e.content.querySelector("[data-equipment-element]"),popularity:e.content.querySelector("[data-popular-element]"),burnedCalories:e.content.querySelector("[data-burnedCalories-element]"),time:e.content.querySelector("[data-time-element]"),description:e.content.querySelector("[data-description-element]")},s=e.content.querySelector("[data-cut-percent]");(C=s.parentElement)==null||C.setAttribute("id","cut-off-star");const i=e.content.querySelector("[data-rating-list]");for(const d in t){const h=t[d],g=(A=this.exercise)==null?void 0:A[d];g?(h.classList.remove("hidden"),h instanceof HTMLImageElement?h.src=String(g):d==="rating"?(h.innerHTML=Number(g).toFixed(2),this.renderStars(Number(g),s,i)):h.innerHTML=String(g)):h.classList.add("hidden")}const n=e.content.querySelector("[data-favorite-element]"),r=n.querySelector("[data-favorite-title]"),o=n.querySelector("[data-favorite-icon]");n.addEventListener("click",()=>{this.handleFavorite(this.exercise._id,r,o)}),e.content.querySelector("[data-add-rating-element]").addEventListener("click",()=>{var d;this.close(),(d=this.onRatingOpenCallback)==null||d.call(this,this.exercise)}),this.handleFavorite(this.exercise._id,r,o,!1),this.dialogContent.innerHTML="",this.dialogContent.appendChild(e.content)}handleFavorite(e,t,s,i=!0){var r;let n=L.isFavorite(e);i&&(n=!n),n?(i&&L.addFavorite(e),t.innerHTML="Remove from favorites",s.setAttribute("href",`${l}#icon-trash`)):(i&&L.removeFavorite(e),t.innerHTML="Add to favorites",s.setAttribute("href",`${l}#icon-heart`)),(r=this.onFavoriteToggleCallback)==null||r.call(this,e)}renderStars(e,t,s){var r;const i=Math.floor(e),n=e%1;Array.from(s.children).forEach(o=>{var E;o.classList.remove("icon-star-filled"),(E=o.lastElementChild)==null||E.classList.add("hidden")});for(let o=0;o<i;o++)s.children[o].classList.add("icon-star-filled");n&&(t.setAttribute("width",(14*n).toString()),(r=s.children[i].lastElementChild)==null||r.classList.remove("hidden"))}}class se extends k{constructor(){super(...arguments),this.exercise=null,this.email="",this.comment="",this.rating="0",this.inputHandler=e=>{const t=e.target;t.name in this&&(this[t.name]=t.value),t.name==="rating"&&this.renderStars()},this.submitHandler=async e=>{e.preventDefault();try{await $(this.exercise._id,{rate:Number(this.rating),email:this.email,review:this.comment}),this.successToast(),this.close()}catch(t){t instanceof q&&t.response?this.errorToast(t.response.data.message):this.errorToast("An unexpected error occurred")}}}show(e){this.exercise=e,this.render(),this.showDialog(),this.renderStars()}render(){const e=this.dialogContentTemplate.cloneNode(!0),t=e.content.querySelector(".exercise-rating__form");this.ratingTitle=t.querySelector("[data-rating-title]");const s=t.elements.namedItem("rating");s instanceof RadioNodeList?this.stars=Array.from(s):this.stars=[],t.addEventListener("change",this.inputHandler),t.addEventListener("input",this.inputHandler),t.addEventListener("submit",this.submitHandler),this.dialogContent.innerHTML="",this.dialogContent.appendChild(e.content)}successToast(){M.success({title:"Feedback sent",message:"Thank you for the feedback.",position:"topRight",close:!1})}errorToast(e){M.error({title:"Error",message:e,position:"topRight",close:!1})}renderStars(){if(this.stars.length){this.stars.forEach(e=>{var t;return(t=e.nextElementSibling)==null?void 0:t.classList.remove("icon-star-filled")});for(let e=0;e<this.stars.length;e++){const t=this.stars[e];e<Number(this.rating)&&setTimeout(()=>{var s;return(s=t.nextElementSibling)==null?void 0:s.classList.add("icon-star-filled")},e*120)}this.ratingTitle.innerHTML=this.rating+".0"}}}const D=768,I=1152,H=()=>window.innerWidth<D,ie=()=>!H()&&window.innerWidth<I;class F{constructor(e){this.config=e,this.init()}init(){var e,t,s;this.toggleItemsVisibility(!1),(e=this.config.openMenuBtn)==null||e.addEventListener("click",()=>{this.onMenuOpen()}),(t=this.config.closeMenuBtn)==null||t.addEventListener("click",()=>{this.onMenuClose()}),(s=this.config.backdrop)==null||s.addEventListener("click",()=>{this.onMenuClose()})}toggleItemsVisibility(e){this.config.menu.setAttribute("aria-hidden",e?"false":"true"),this.config.menu.querySelectorAll("button, a").forEach(t=>{t.setAttribute("tabindex",e?"0":"-1"),t.setAttribute("aria-hidden",e?"false":"true")})}onMenuClose(){this.config.menu.classList.remove("mobile-menu-open"),this.toggleItemsVisibility(!1),document.body.style.overflow=""}onMenuOpen(){this.config.menu.classList.add("mobile-menu-open"),this.toggleItemsVisibility(!0),document.body.style.overflow="hidden"}}const N=async()=>(await p.get("/quote")).data,f=class f{async initialize(){const e=this.getStoredQuote(),t=new Date().toISOString().split("T")[0];if(e&&e.date===t){this.renderQuote(e.quote);return}try{const s=await N();this.storeQuote(s,t),this.renderQuote(s)}catch(s){console.error("Error fetching quote:",s)}}getStoredQuote(){const e=localStorage.getItem(f.LOCAL_STORAGE_KEY);return e?JSON.parse(e):null}storeQuote(e,t){const s={quote:e,date:t};localStorage.setItem(f.LOCAL_STORAGE_KEY,JSON.stringify(s))}renderQuote(e){const t=document.getElementById("quote"),s=document.getElementById("author");t&&(t.textContent=e.quote),s&&(s.textContent=e.author)}};f.LOCAL_STORAGE_KEY="yourEnergy.quoteOfTheDay";let x=f;const c=class c{constructor(e){if(this.toggleElements=document.querySelectorAll(e),this.toggleElements.length===0)throw new Error(`No elements found with selector "${e}".`);this.init()}init(){this.getDarkModePreference()&&(document.body.classList.add(c.darkModeClass),this.updateButtonsState(!0)),this.toggleElements.forEach(t=>t.addEventListener("click",()=>this.toggleDarkMode()))}getDarkModePreference(){return localStorage.getItem(c.LOCAL_STORAGE_KEY)==="true"}toggleDarkMode(){document.body.classList.contains(c.darkModeClass)?(document.body.classList.remove(c.darkModeClass),this.updateButtonsState(!1),localStorage.setItem(c.LOCAL_STORAGE_KEY,"false")):(document.body.classList.add(c.darkModeClass),this.updateButtonsState(!0),localStorage.setItem(c.LOCAL_STORAGE_KEY,"true"))}updateButtonsState(e){this.toggleElements.forEach(t=>{e?t.classList.add("active"):t.classList.remove("active")})}};c.LOCAL_STORAGE_KEY="isDarkMode",c.darkModeClass="dark-mode";let w=c;const _=(a,e)=>{window.scrollY>e?K(a):G(a)},G=a=>{a.classList.remove("scroll-btn-visible"),a.setAttribute("aria-hidden","true"),a.setAttribute("tabindex","-1")},K=a=>{a.classList.add("scroll-btn-visible"),a.setAttribute("aria-hidden","false"),a.setAttribute("tabindex","0")},Y=(a=window.innerHeight/4)=>{const e=document.getElementById("scroll-to-top-btn");if(!e){console.error('Button with id "scroll-to-top-btn" not found.');return}_(e,a),e.addEventListener("click",()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})}),window.addEventListener("scroll",()=>{_(e,a)})},j=document.querySelector(".js-menu-open"),Q=document.querySelector(".js-menu-close"),W=document.querySelector(".js-mobile-menu"),z=document.querySelector(".js-mobile-menu-backdrop");new F({openMenuBtn:j,closeMenuBtn:Q,menu:W,backdrop:z});const U=new x;U.initialize();new w(".dark-mode-toggle");Y();export{ee as E,Z as P,te as a,se as b,X as c,ie as d,L as f,J as g,H as i,p as y};
//# sourceMappingURL=main-JtBR7etj.js.map
