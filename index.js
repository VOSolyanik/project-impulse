import{y as p,P as f,E as S,g as C,a as A,b as P,c as v,i as y}from"./assets/main-uZiGEeOn.js";/* empty css                      */import{i as d,A as L}from"./assets/vendor-4jich7g5.js";const x=async i=>(await p.get("/filters",{params:i})).data,w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";class F{constructor(e,t,s,r){this.containerElement=e,this.paginationContainer=t,this.filter=s,this.itemsPerPage=r,this.init()}setFilter(e){this.filter=e,this.loadData()}clear(){var e;this.containerElement.innerHTML="",(e=this.pagination)==null||e.clear()}onCategorySelect(e){this.onCategorySelectCallback=e}init(){this.loadData(),this.initListeners(),this.initObservers()}initListeners(){this.containerElement.addEventListener("click",e=>{var r;const s=(r=e.target.closest("[data-type]"))==null?void 0:r.getAttribute("data-type");this.onCategorySelectCallback&&s&&this.onCategorySelectCallback(s)})}initObservers(){const e=new IntersectionObserver((r,n)=>{r.forEach(a=>{if(a.isIntersecting){const c=a.target;c.src=c.dataset.src||"",n.unobserve(c)}})});let t=[];new MutationObserver(r=>{for(const n of r)n.type==="childList"&&(t.forEach(a=>{e.unobserve(a)}),t=Array.from(this.containerElement.querySelectorAll("img[data-src]")),t.forEach(a=>{e.observe(a)}))}).observe(this.containerElement,{childList:!0,subtree:!1,attributes:!0})}async loadData(e=1,t=this.itemsPerPage){try{const s=await x({filter:this.filter,page:e,limit:t});this.updatePagination(s.totalPages,+s.page,+s.perPage),this.render(s.results)}catch(s){console.error("Error loading data:",s)}}updatePagination(e,t,s){this.pagination?(this.pagination.setTotalPages(e),this.pagination.setPage(t)):(this.pagination=new f(this.paginationContainer,e,s),this.pagination.onPageChange((r,n)=>{this.loadData(r,n)}))}createCategoryItem(e){return`
      <li class="exercise-category-card" data-type="${e.name}">
        <img
          class="exercise-category-image"
          src="${w}"
          data-src="${e.imgURL}"
          loading="lazy"
          alt="${e.name||"No name"}"
        />
        <div class="exercise-category-overlay" role="button" tabindex="0">
          <h3 class="exercise-category-title">${e.name}</h3>
          <p class="exercise-category-subtitle">${e.filter}</p>
        </div>
      </li>
    `}render(e){this.containerElement.innerHTML=e.filter(t=>t.name).map(this.createCategoryItem).join("")}}var o=(i=>(i.Muscles="Muscles",i.BodyParts="Body parts",i.Equipment="Equipment",i))(o||{});class I{constructor(e,t){this.config=e,this.currentCategory=t,this.currentFilter="",this.currentSearch="",this.config.searchInputElement=this.config.searchElement.querySelector("input"),this.config.searchResetElement=this.config.searchElement.querySelector('button[type="reset"]'),this.init()}onFilterChange(e){this.onChangeCallback=e}setCategory(e){this.currentCategory=e,this.currentFilter="",this.currentSearch="",this.render(),this.updateBreadcrumbs(),this.updateSearchForm(),this.emitChange()}getCategory(){return this.currentCategory}setFilter(e){this.currentFilter=e,this.updateBreadcrumbs(),this.updateSearchForm(),this.emitChange()}setSearch(e){this.currentSearch=e,this.emitChange()}init(){this.render(),this.initListeners()}initListeners(){var e;this.config.categoryFiltersElement.addEventListener("click",t=>{this.handleCategoryClick(t)}),this.config.searchElement.addEventListener("submit",t=>{this.handleSearchSubmit(t)}),this.config.searchElement.addEventListener("reset",()=>{this.handleSearchReset()}),(e=this.config.searchInputElement)==null||e.addEventListener("input",t=>{this.handleSearchInput(t)})}emitChange(){var e;(e=this.onChangeCallback)==null||e.call(this,this.currentCategory,this.currentFilter,this.currentSearch)}handleCategoryClick(e){const t=e.target;if(t.classList.contains("js-filter-btn")){const s=t.dataset.type;if(!s){console.error("No data type found.");return}this.setCategory(s)}}handleSearchSubmit(e){e.preventDefault();const s=new FormData(e.target).get("search");this.setSearch(s)}handleSearchReset(){this.currentSearch!==""&&(this.setSearch(""),this.updateSearchInput(""))}handleSearchInput(e){this.updateSearchInput(e.target.value)}updateSearchForm(){this.currentFilter?this.config.searchElement.classList.remove("hidden"):(this.config.searchElement.dispatchEvent(new Event("reset")),this.config.searchElement.classList.add("hidden"))}updateSearchInput(e){var t,s;e?(t=this.config.searchResetElement)==null||t.classList.remove("hidden"):(s=this.config.searchResetElement)==null||s.classList.add("hidden")}updateBreadcrumbs(){const e=this.config.breadcrumbsElement.querySelector(".breadcrumbs-splitter"),t=this.config.breadcrumbsElement.querySelector(".filter-value");e&&t&&(this.currentFilter!==""?(e.classList.remove("hidden"),t.classList.remove("hidden"),t.innerHTML=this.currentFilter):(e.classList.add("hidden"),t.classList.add("hidden"),t.innerHTML=""))}render(){this.config.categoryFiltersElement.innerHTML=Object.values(o).map(e=>{const t=e===this.currentCategory?"active":"",s=e.charAt(0).toUpperCase()+e.slice(1);return`
          <li>
            <button
              class="filter-btn js-filter-btn ${t}"
              data-type="${e}"
              type="button"
            >
              ${s}
            </button>
          </li>
        `}).join("")}}class q extends S{constructor(e,t,s,r="No exercises found"){super(e,!1,r),this.containerElement=e,this.paginationContainer=t,this.itemsPerPage=s,this.params={}}setParams(e){this.params=e,this.loadData(1,this.itemsPerPage)}clear(){var e;super.clear(),(e=this.pagination)==null||e.clear()}async loadData(e=1,t=this.itemsPerPage){try{const s=await C({...this.params,page:e,limit:t});this.updatePagination(s.totalPages,s.page,s.perPage),this.render(s.results)}catch(s){console.error("Error loading data:",s)}}updatePagination(e,t,s){this.pagination?(this.pagination.setTotalPages(e),this.pagination.setPage(t)):(this.pagination=new f(this.paginationContainer,e,s),this.pagination.onPageChange((r,n)=>{this.loadData(r,n)}))}}const M=async i=>(await p.post("/subscription",{email:i})).data;class B{constructor(e){this.form=e,this.form&&(this.submitButton=this.form.querySelector('button[type="submit"]'),this.init())}init(){this.form.addEventListener("submit",e=>this.handleSubmit(e))}async handleSubmit(e){var r,n;if(e.preventDefault(),!this.form)return;const s=new FormData(this.form).get("email");this.toggleButtonLoader(!0);try{const a=await M(s);d.success({message:a.message,position:"topRight"}),this.form.reset()}catch(a){await new Promise(b=>setTimeout(b,1e3));const c=a instanceof L?((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Error while sending subscription.":"An unexpected error occurred while sending the subscription.";d.error({message:c,position:"topRight"})}finally{this.toggleButtonLoader(!1)}}toggleButtonLoader(e){const t=this.submitButton.querySelector(".button-text"),s=this.submitButton.querySelector(".button-loader");e?(t==null||t.classList.add("hidden"),s==null||s.classList.remove("hidden")):(t==null||t.classList.remove("hidden"),s==null||s.classList.add("hidden"))}}const D=`It appears that there are no any exercises for selected filters.
Try to change filters or search criteria.`,u=T(),l=k(),h=O();j();const g=new A("#exercise-modal-content"),m=new P("#exercise-rating-content"),R={[o.Muscles]:"muscles",[o.Equipment]:"equipment",[o.BodyParts]:"bodypart"};u.onFilterChange((i,e,t)=>{e?(h.setParams({[R[i]]:e,keyword:t}),l.clear()):(l.setFilter(i),h.clear())});l.onCategorySelect(i=>{u.setFilter(i)});const E=async i=>{g.show(i),g.onRatingOpen(e=>{m.show(e),m.onDialogClose(()=>{E(i)})})};h.onExerciseSelect(async i=>{const e=await v(i);E(e)});function T(){const i=document.querySelector(".js-category-filters"),e=document.querySelector(".js-breadcrumbs"),t=document.querySelector("#search-form");return new I({categoryFiltersElement:i,breadcrumbsElement:e,searchElement:t},o.Muscles)}function k(){const i=y()?9:12,e=document.querySelector(".exercise-categories-list"),t=document.querySelector(".js-categories-pagination");return new F(e,t,u.getCategory(),i)}function O(){const i=y()?8:10,e=document.querySelector(".exercise-cards-list"),t=document.querySelector(".js-items-pagination");return new q(e,t,i,D)}function j(){const i=document.querySelector(".subscribe-form");return new B(i)}
//# sourceMappingURL=index.js.map
