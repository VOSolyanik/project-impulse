{"version":3,"file":"favorites.js","sources":["../src/ts/components/exercises/favorites-exercise-items.ts","../src/ts/pages/favorites.ts"],"sourcesContent":["import { Exercise } from '@/types/exercise';\nimport { getExercises } from '@/api/exercises.api';\nimport { Pagination } from '@/components/pagination';\nimport { ExerciseItems } from './exercise-items';\n\nexport class FavoritesExerciseItems extends ExerciseItems {\n  private allItems: Exercise[] = [];\n  private favorites: Exercise[] = [];\n  private pagination?: Pagination;\n  private currentPage: number = 1;\n  private totalPages: number = 0;\n\n  constructor(\n    protected containerElement: HTMLElement,\n    private paginationContainer: HTMLElement,\n    private itemsPerPage: number | null,\n    private ids: string[],\n    emptyStateMessage: string = 'No favorite exercises found',\n  ) {\n    super(containerElement, true, emptyStateMessage);\n    if (ids.length) {\n      this.loadData();\n    } else {\n      this.renderEmptyState();\n    }\n  }\n\n  setFavoriteIds(ids: string[]): void {\n    this.ids = ids;\n    if (this.itemsPerPage) {\n      this.totalPages = Math.ceil(this.ids.length / this.itemsPerPage);\n      this.currentPage = this.totalPages < this.currentPage\n        ? this.totalPages : this.currentPage;\n    }\n    const favSet = new Set(ids);\n    this.favorites = this.allItems.filter(item => favSet.has(item._id));\n    this.updatePagination(this.totalPages, this.currentPage);\n    this.renderWithPagination();\n  }\n\n  private async loadData(): Promise<void> {\n    try {\n      const result = await getExercises({\n        page: 1,\n        limit: 999999\n      });\n\n      this.allItems = result.results;\n      this.setFavoriteIds(this.ids);\n    } catch (error) {\n      console.error('Error loading data:', error);\n    }\n  }\n\n  private renderWithPagination(): void {\n    this.render(this.favorites.slice((this.currentPage - 1) * (this.itemsPerPage ?? 999999), this.currentPage * (this.itemsPerPage ?? 999999)));\n  }\n\n  private updatePagination(totalPages: number, page: number): void {\n    if (!this.itemsPerPage) return;\n\n    if (!this.pagination) {\n      this.pagination = new Pagination(\n        this.paginationContainer,\n        totalPages,\n        this.itemsPerPage\n      );\n      this.pagination.onPageChange((page) => {\n        this.currentPage = page;\n        this.renderWithPagination();\n      });\n    } else {\n      this.pagination.setTotalPages(totalPages);\n      this.pagination.setPage(page);\n    }\n  }\n}\n","import { getExerciseById } from '@/api/exercises.api';\nimport { FavoritesExerciseItems } from '@/components/exercises/favorites-exercise-items';\nimport { ExerciseModal } from '@/components/modal/exercise-modal';\nimport { ExerciseRatingModal } from '@/components/modal/rating-modal';\nimport { favoritesState } from '@/favorites-state';\nimport { Exercise } from '@/types/exercise';\nimport { isMobileScreen, isTabletScreen } from '@/utils/screen-size';\n\nconst EMPTY_STATE_MESSAGE = `It appears that you haven't added any exercises to your favorites yet.\nTo get started, you can add exercises that you like to your favorites for easier access in the future.`;\n\nconst exerciseItemsContainer = document.querySelector<HTMLElement>(\n  '.exercise-cards-list'\n);\nconst exerciseItemsPaginationContainer = document.querySelector<HTMLElement>(\n  '.js-items-pagination'\n);\n\nexerciseItemsContainer!.classList.add('custom-scroll-bar');\n\nconst pageSize = isMobileScreen()\n  ? 8\n  : isTabletScreen()\n    ? 10\n    : null;\n\nconst exerciseItems = new FavoritesExerciseItems(\n  exerciseItemsContainer!,\n  exerciseItemsPaginationContainer!,\n  pageSize,\n  favoritesState.gerFavorites(),\n  EMPTY_STATE_MESSAGE\n);\n\nconst exerciseModal = new ExerciseModal('#exercise-modal-content');\nconst ratingModal = new ExerciseRatingModal('#exercise-rating-content');\n\nexerciseItems.onExerciseDelete(id => {\n  favoritesState.removeFavorite(id);\n  exerciseItems.setFavoriteIds(favoritesState.gerFavorites());\n});\n\nconst openExerciseModal = async (exercise: Exercise) => {\n  exerciseModal.show(exercise);\n  exerciseModal.onRatingOpen(item => {\n    ratingModal.show(item);\n    ratingModal.onDialogClose(() => {\n      openExerciseModal(exercise);\n    });\n  });\n};\n\nexerciseItems.onExerciseSelect(async id => {\n  const exercise = await getExerciseById(id);\n  openExerciseModal(exercise);\n});\n\nexerciseModal.onFavoriteToggle(() => {\n  exerciseItems.setFavoriteIds(favoritesState.gerFavorites());\n});\n"],"names":["FavoritesExerciseItems","ExerciseItems","containerElement","paginationContainer","itemsPerPage","ids","emptyStateMessage","favSet","item","result","getExercises","error","totalPages","page","Pagination","EMPTY_STATE_MESSAGE","exerciseItemsContainer","exerciseItemsPaginationContainer","pageSize","isMobileScreen","isTabletScreen","exerciseItems","favoritesState","exerciseModal","ExerciseModal","ratingModal","ExerciseRatingModal","id","openExerciseModal","exercise","getExerciseById"],"mappings":"8KAKO,MAAMA,UAA+BC,CAAc,CAOxD,YACYC,EACFC,EACAC,EACAC,EACRC,EAA4B,8BAC5B,CACM,MAAAJ,EAAkB,GAAMI,CAAiB,EANrC,KAAA,iBAAAJ,EACF,KAAA,oBAAAC,EACA,KAAA,aAAAC,EACA,KAAA,IAAAC,EAVV,KAAQ,SAAuB,GAC/B,KAAQ,UAAwB,GAEhC,KAAQ,YAAsB,EAC9B,KAAQ,WAAqB,EAUvBA,EAAI,OACN,KAAK,SAAS,EAEd,KAAK,iBAAiB,CAE1B,CAEA,eAAeA,EAAqB,CAClC,KAAK,IAAMA,EACP,KAAK,eACP,KAAK,WAAa,KAAK,KAAK,KAAK,IAAI,OAAS,KAAK,YAAY,EAC/D,KAAK,YAAc,KAAK,WAAa,KAAK,YACtC,KAAK,WAAa,KAAK,aAEvB,MAAAE,EAAS,IAAI,IAAIF,CAAG,EACrB,KAAA,UAAY,KAAK,SAAS,UAAeE,EAAO,IAAIC,EAAK,GAAG,CAAC,EAClE,KAAK,iBAAiB,KAAK,WAAY,KAAK,WAAW,EACvD,KAAK,qBAAqB,CAC5B,CAEA,MAAc,UAA0B,CAClC,GAAA,CACI,MAAAC,EAAS,MAAMC,EAAa,CAChC,KAAM,EACN,MAAO,MAAA,CACR,EAED,KAAK,SAAWD,EAAO,QAClB,KAAA,eAAe,KAAK,GAAG,QACrBE,EAAO,CACN,QAAA,MAAM,sBAAuBA,CAAK,CAC5C,CACF,CAEQ,sBAA6B,CACnC,KAAK,OAAO,KAAK,UAAU,OAAO,KAAK,YAAc,IAAM,KAAK,cAAgB,QAAS,KAAK,aAAe,KAAK,cAAgB,OAAO,CAAC,CAC5I,CAEQ,iBAAiBC,EAAoBC,EAAoB,CAC1D,KAAK,eAEL,KAAK,YAWH,KAAA,WAAW,cAAcD,CAAU,EACnC,KAAA,WAAW,QAAQC,CAAI,IAX5B,KAAK,WAAa,IAAIC,EACpB,KAAK,oBACLF,EACA,KAAK,YAAA,EAEF,KAAA,WAAW,aAAcC,GAAS,CACrC,KAAK,YAAcA,EACnB,KAAK,qBAAqB,CAAA,CAC3B,GAKL,CACF,CCpEA,MAAME,EAAsB;AAAA,wGAGtBC,EAAyB,SAAS,cACtC,sBACF,EACMC,EAAmC,SAAS,cAChD,sBACF,EAEAD,EAAwB,UAAU,IAAI,mBAAmB,EAEzD,MAAME,EAAWC,EAAe,EAC5B,EACAC,IACE,GACA,KAEAC,EAAgB,IAAIrB,EACxBgB,EACAC,EACAC,EACAI,EAAe,aAAa,EAC5BP,CACF,EAEMQ,EAAgB,IAAIC,EAAc,yBAAyB,EAC3DC,EAAc,IAAIC,EAAoB,0BAA0B,EAEtEL,EAAc,iBAAuBM,GAAA,CACnCL,EAAe,eAAeK,CAAE,EAClBN,EAAA,eAAeC,EAAe,aAAc,CAAA,CAC5D,CAAC,EAED,MAAMM,EAAoB,MAAOC,GAAuB,CACtDN,EAAc,KAAKM,CAAQ,EAC3BN,EAAc,aAAqBf,GAAA,CACjCiB,EAAY,KAAKjB,CAAI,EACrBiB,EAAY,cAAc,IAAM,CAC9BG,EAAkBC,CAAQ,CAAA,CAC3B,CAAA,CACF,CACH,EAEAR,EAAc,iBAAiB,MAAMM,GAAM,CACnC,MAAAE,EAAW,MAAMC,EAAgBH,CAAE,EACzCC,EAAkBC,CAAQ,CAC5B,CAAC,EAEDN,EAAc,iBAAiB,IAAM,CACrBF,EAAA,eAAeC,EAAe,aAAc,CAAA,CAC5D,CAAC"}